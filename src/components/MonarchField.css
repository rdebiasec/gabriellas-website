.monarch-field {
  position: absolute;
  inset: 0;
  pointer-events: none;
  touch-action: none;
  user-select: none;
  overflow: visible;
  z-index: 3;
}

.monarch-field--soft .monarch-field__butterfly {
  animation: monarch-soft-flight var(--duration, 6000ms) ease-out forwards;
}

.monarch-field__butterfly {
  position: absolute;
  left: var(--start-x, 50%);
  bottom: calc(var(--vertical-offset, -5) * 1%);
  width: var(--size, 54px);
  height: var(--size, 54px);
  transform: translate3d(-50%, 0, 0);
  animation: monarch-flight var(--duration, 12000ms) cubic-bezier(0.25, 0.1, 0.25, 1) forwards;
  animation-delay: var(--delay, 0ms);
  opacity: 0;
  filter: drop-shadow(0 16px 20px rgba(74, 31, 99, 0.3)) hue-rotate(var(--hue-rotate, 0deg));
  will-change: transform, opacity;
}

.monarch-field__butterfly svg {
  width: 100%;
  height: 100%;
  transform-origin: center;
  animation: monarch-flutter 1800ms ease-in-out infinite;
  animation-delay: var(--delay, 0ms);
  --direction: 1;
}

.monarch-field__butterfly--mirrored svg {
  --direction: -1;
}

@keyframes monarch-flight {
  0% {
    transform: translate3d(-50%, 20%, 0) scale(0.6) rotate(-8deg);
    opacity: 0;
  }

  10% {
    opacity: 0.95;
  }

  60% {
    opacity: 0.85;
  }

  100% {
    transform: translate3d(calc(-50% + var(--horizontal-shift, 0%)), -140%, 0) scale(1) rotate(4deg);
    opacity: 0;
  }
}

@keyframes monarch-soft-flight {
  0% {
    transform: translate3d(-50%, 10%, 0);
    opacity: 0;
  }

  30% {
    opacity: 0.35;
  }

  100% {
    transform: translate3d(-50%, -20%, 0);
    opacity: 0;
  }
}

@keyframes monarch-flutter {
  0%,
  100% {
    transform: scaleX(var(--direction, 1)) scale(0.94);
  }

  50% {
    transform: scaleX(var(--direction, 1)) scale(var(--flutter-scale, 1.05));
  }
}

@media (max-width: 640px) {
  .monarch-field__butterfly {
    width: calc(var(--size, 50px) * 0.8);
    height: calc(var(--size, 50px) * 0.8);
  }
}

@media (prefers-reduced-motion: reduce) {
  .monarch-field {
    animation: none;
  }

  .monarch-field__butterfly {
    animation: monarch-soft-flight var(--duration, 6000ms) ease-out forwards;
  }

  .monarch-field__butterfly svg {
    animation: none;
  }
}

